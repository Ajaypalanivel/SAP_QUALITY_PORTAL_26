<mvc:View
    controllerName="quality.controller.Usage"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core">

    <Page 
        title="Usage Decisions"
        showNavButton="true"
        navButtonPress=".onNavBack"
        class="usage-page">

        <content>
            <VBox>
                <!-- 🔍 Search + Filter -->
                <Toolbar>
                    <SearchField
                        width="40%"
                        liveChange=".onSearch"
                        placeholder="Search by Lot, Decision, or User" />

                    <ToolbarSpacer/>

                    <Label text="Decision:"/>
                    <Select id="decisionFilter" change=".onFilterDecision">
                        <core:Item key="ALL" text="All" />
                        <core:Item key="A" text="Accepted" />
                        <core:Item key="R" text="Rejected" />
                    </Select>
                </Toolbar>

                <!-- 📋 Table with Horizontal Scroll -->
                <ScrollContainer width="100%" height="500px" horizontal="true" vertical="true">
                    <Table id="usageTable" inset="false" items="{/UsageData}" width="100%">
                        <columns>
                            <Column width="150px"><Text text="Inspection Lot" /></Column>
                            <Column width="100px"><Text text="Lot Type" /></Column>
                            <Column width="120px"><Text text="Usage Catalog" /></Column>
                            <Column width="100px"><Text text="Plant" /></Column>
                            <Column width="120px"><Text text="Selected Set" /></Column>
                            <Column width="120px"><Text text="Code Group" /></Column>
                            <Column width="120px"><Text text="Decision Code" /></Column>
                            <Column width="120px"><Text text="Quality Score" /></Column>
                            <Column width="120px"><Text text="Decision By" /></Column>
                            <Column width="120px"><Text text="Decision Date" /></Column>
                            <Column width="100px"><Text text="Decision Time" /></Column>
                            <Column width="120px"><Text text="Follow Up" /></Column>
                            <Column width="120px"><Text text="Code Valuation" /></Column>
                        </columns>

                        <items>
                            <ColumnListItem>
                                <cells>
                                    <Text text="{InspectionLotNo}" />
                                    <Text text="{InspectionLotType}" />
                                    <Text text="{UsageCatalog}" />
                                    <Text text="{Plant}" />
                                    <Text text="{SelectedSet}" />
                                    <Text text="{CodeGroup}" />
                                    <Text text="{UsageDecisionCode}" />
                                    <Text text="{QualityScore}" />
                                    <Text text="{DecisionBy}" />
                                    <Text text="{DecisionDate}" />
                                    <Text text="{DecisionTime}" />
                                    <Text text="{FollowUpAction}" />
                                    <Text text="{CodeValuation}" />
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </ScrollContainer>

                <!-- 📄 Pagination -->
                <Toolbar class="pagination-toolbar" design="Transparent">
                    <Button text="&lt;&lt;" press=".onFirstPage" class="pagination-btn"/>
                    <Button text="&lt;" press=".onPrevPage" class="pagination-btn"/>
                    <Text text="Page {/currentPage} of {/totalPages}" class="page-info"/>
                    <Button text="&gt;" press=".onNextPage" class="pagination-btn"/>
                    <Button text="&gt;&gt;" press=".onLastPage" class="pagination-btn"/>
                </Toolbar>
            </VBox>
        </content>
    </Page>
</mvc:View>
